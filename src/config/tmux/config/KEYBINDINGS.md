# tmux 快捷键速查表

本文档列出所有 tmux 配置的快捷键绑定。

> **注意**: 前缀键为 `Ctrl+\`，所有快捷键需要先按 `Ctrl+\` 再按对应键。

---

## 📋 快捷键前缀

| 按键 | 说明 |
|------|------|
| `Ctrl+\` | tmux 前缀键（替代默认的 `Ctrl+B`） |
| `Ctrl+\ Ctrl+\` | 发送字面 `Ctrl+\` 到终端 |

---

## 🪟 窗口管理

| 快捷键 | 功能 | 说明 |
|--------|------|------|
| `prefix + c` | 新建窗口 | 在当前目录创建新窗口 |
| `prefix + 1-9` | 切换到窗口 1-9 | 快速切换窗口 |
| `prefix + p` | 上一个窗口 | 切换到上一个窗口 |
| `prefix + n` | 下一个窗口 | 切换到下一个窗口 |
| `prefix + ^` | 最后一个窗口 | 在两个窗口间快速切换 |
| `prefix + ,` | 重命名窗口 | 修改当前窗口名称 |
| `prefix + &` | 关闭窗口 | 关闭当前窗口（无确认） |
| `prefix + <` | 窗口左移 | 重新排序：向左移动窗口 |
| `prefix + >` | 窗口右移 | 重新排序：向右移动窗口 |

---

## 📱 面板操作

### 面板分割
| 快捷键 | 功能 | 说明 |
|--------|------|------|
| `prefix + %` | 水平分割 | 左右分割（保持当前目录） |
| `prefix + "` | 垂直分割 | 上下分割（保持当前目录） |

### 面板导航（Vim 风格）
| 快捷键 | 功能 | 说明 |
|--------|------|------|
| `prefix + h` | 左侧面板 | 移动到左侧面板 |
| `prefix + j` | 下方面板 | 移动到下方面板 |
| `prefix + k` | 上方面板 | 移动到上方面板 |
| `prefix + l` | 右侧面板 | 移动到右侧面板 |
| `prefix + Tab` | 最后一个面板 | 快速在两个面板间切换 |
| `prefix + o` | 下一个面板 | 循环切换面板 |
| `prefix + ;` | 上一个活动面板 | 返回上一个使用的面板 |

### 面板管理
| 快捷键 | 功能 | 说明 |
|--------|------|------|
| `prefix + x` | 关闭面板 | 关闭当前面板（无确认） |
| `prefix + z` | 面板缩放 | 全屏/恢复当前面板 |
| `prefix + {` | 向上交换 | 与上方面板交换位置 |
| `prefix + }` | 向下交换 | 与下方面板交换位置 |
| `prefix + !` | 面板变窗口 | 将当前面板移到新窗口 |

### 面板大小调整
| 快捷键 | 功能 | 说明 |
|--------|------|------|
| `prefix + H` | 向左扩展 | 向左扩展 5 个单元 |
| `prefix + J` | 向下扩展 | 向下扩展 5 个单元 |
| `prefix + K` | 向上扩展 | 向上扩展 5 个单元 |
| `prefix + L` | 向右扩展 | 向右扩展 5 个单元 |

### 面板移动到窗口
| 快捷键 | 功能 | 说明 |
|--------|------|------|
| `prefix + Alt+1` | 移动到窗口 1 | 将当前面板加入窗口 1 |
| `prefix + Alt+2-9` | 移动到窗口 2-9 | 同上 |

---

## 🗂️ 会话管理

| 快捷键 | 功能 | 说明 |
|--------|------|------|
| `prefix + N` | 新建会话 | 基于当前目录创建会话 |
| `prefix + S` | 会话列表 | 弹窗显示所有会话并切换 |
| `prefix + T` | 会话列表 | 同上（备用快捷键） |
| `prefix + d` | 分离会话 | 断开连接但保持会话运行 |
| `prefix + X` | 关闭会话 | 关闭当前会话 |
| `prefix + $` | 重命名会话 | 修改当前会话名称 |
| `prefix + U` | Popup 会话 | 切换到浮动 popup 会话 |

---

## 📋 复制模式（Vi）

### 进入复制模式
| 快捷键 | 功能 | 说明 |
|--------|------|------|
| `prefix + [` | 进入复制模式 | 开始浏览和复制 |
| `prefix + Escape` | 进入复制模式 | 备用快捷键 |

### 复制模式内操作
| 快捷键 | 功能 | 说明 |
|--------|------|------|
| `v` | 开始选择 | 进入可视模式 |
| `V` | 选择整行 | 选择当前行 |
| `Ctrl+V` | 矩形选择 | 块选择模式 |
| `y` | 复制并退出 | 复制到系统剪贴板 |
| `Enter` | 复制并退出 | 同上 |
| `/` | 向下搜索 | 增量搜索 |
| `?` | 向上搜索 | 反向增量搜索 |
| `n` | 下一个匹配 | 跳到下一个搜索结果 |
| `N` | 上一个匹配 | 跳到上一个搜索结果 |
| `h/j/k/l` | Vim 导航 | 光标移动 |
| `w/b` | 词移动 | 前进/后退一个词 |
| `0/^/$` | 行首/行尾 | 跳转到行首/行尾 |
| `g/G` | 首行/末行 | 跳转到缓冲区首/末 |
| `Ctrl+U/D` | 翻页 | 向上/下翻半页 |
| `Escape` | 退出 | 退出复制模式 |
| `q` | 退出 | 退出复制模式 |

### 粘贴
| 快捷键 | 功能 | 说明 |
|--------|------|------|
| `prefix + ]` | 粘贴 | 粘贴 tmux 缓冲区 |
| `prefix + P` | 系统粘贴 | 粘贴系统剪贴板内容 |

---

## 🎯 快捷弹窗

| 快捷键 | 功能 | 说明 |
|--------|------|------|
| `prefix + R` | 命令选择器 | 选择命令并执行 |
| `prefix + C` | 命令新窗口 | 选择命令在新窗口执行 |
| `prefix + \|` | 命令垂直分割 | 选择命令在垂直面板执行 |
| `prefix + -` | 命令水平分割 | 选择命令在水平面板执行 |
| `prefix + g` | 临时终端 | 打开 90% 大小的临时终端 |
| `prefix + M` | man 手册 | 输入命令查看手册 |
| `prefix + G` | git 状态 | 显示当前目录 git 状态 |

---

## ⚙️ 系统与配置

| 快捷键 | 功能 | 说明 |
|--------|------|------|
| `prefix + ?` | 显示所有快捷键 | 查看完整快捷键列表 |
| `prefix + :` | 命令模式 | 输入 tmux 命令 |
| `prefix + r` | 重新加载配置 | 重新读取 ~/.tmux.conf |
| `prefix + I` | 同步窗格 | 开关窗格同步输入 |

---

## 🔌 插件管理（TPM）

| 快捷键 | 功能 | 说明 |
|--------|------|------|
| `prefix + I` | 安装插件 | 安装配置中列出的插件 |
| `prefix + U` | 更新插件 | 更新所有已安装插件 |
| `prefix + Alt+U` | 卸载插件 | 卸载未在配置中的插件 |

### 会话持久化（tmux-resurrect）
| 快捷键 | 功能 | 说明 |
|--------|------|------|
| `prefix + Ctrl+S` | 保存会话 | 手动保存当前会话 |
| `prefix + Ctrl+R` | 恢复会话 | 恢复上次保存的会话 |

> **注意**: 启用 tmux-continuum 后会自动每 15 分钟保存一次

---

## 🖱️ 鼠标支持

| 操作 | 功能 | 说明 |
|------|------|------|
| 点击面板 | 切换面板 | 鼠标点击激活面板 |
| 拖拽边框 | 调整大小 | 拖拽面板边框调整大小 |
| 点击窗口 | 切换窗口 | 点击状态栏窗口切换 |
| 拖拽选择 | 复制文本 | 自动进入复制模式并复制到剪贴板 |
| 滚轮 | 滚动历史 | 自动进入复制模式浏览历史 |

---

## 💡 使用技巧

### 常用工作流
1. **启动项目**: 打开 Ghostty，自动创建 tmux 会话
2. **布局面板**: `prefix + %` 水平分割，`prefix + "` 垂直分割
3. **导航**: 使用 `prefix + hjkl` 快速切换面板
4. **缩放**: `prefix + z` 临时全屏当前面板
5. **多窗口**: `prefix + c` 新建窗口，`prefix + 1-9` 快速切换
6. **复制粘贴**: `prefix + [` 进入复制模式，`v` 选择，`y` 复制

### 面板布局建议
```
┌─────────────────────────────────┐
│  编辑器 (60%)                   │
├──────────────┬──────────────────┤
│  终端 (40%)  │  日志/服务 (40%) │
└──────────────┴──────────────────┘

创建方法：
1. prefix + " (垂直分割)
2. prefix + j (移到下方)
3. prefix + % (水平分割)
4. prefix + H/J/K/L (调整大小)
```

### 快速重启 tmux
```bash
# 保存会话
prefix + Ctrl+S

# 退出 tmux
exit

# 重启 tmux，会自动恢复会话（如果启用 continuum）
tmux
```

### 调试快捷键
```bash
# 查看所有快捷键绑定
tmux list-keys

# 查看特定前缀的绑定
tmux list-keys | grep 'C-\\'

# 查看所有选项
tmux show-options -g
```

---

## 🐛 故障排查

### 快捷键不工作？
1. 确认前缀键：`tmux show-options -g | grep prefix`
2. 检查绑定：`tmux list-keys | grep <key>`
3. 重新加载配置：`tmux source-file ~/.tmux.conf`

### 复制到剪贴板失败？
1. 确认 `pbcopy` 可用：`which pbcopy`
2. 测试复制：`echo "test" | pbcopy && pbpaste`
3. 检查 `set-clipboard` 选项

### 插件不加载？
1. 确认 TPM 已安装：`ls ~/.tmux/plugins/tpm`
2. 安装插件：`prefix + I`
3. 重启 tmux：`tmux kill-server && tmux`

---

## 📚 参考资料

- **tmux 配置**: `~/.tmux.conf`
- **Ghostty 配置**: `~/.config/ghostty/config`
- **TPM 仓库**: https://github.com/tmux-plugins/tpm
- **tmux-resurrect**: https://github.com/tmux-plugins/tmux-resurrect
- **官方文档**: `man tmux`

---

**最后更新**: 2024  
**前缀键**: `Ctrl+\` (ASCII `\x1c`)  
**Ghostty 集成**: 所有快捷键通过 `⌘ Command` 键映射