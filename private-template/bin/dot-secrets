#!/usr/bin/env sh

set -eu

DOTFILES_PRIVATE="${HOME}/.dotfiles-private"

die() { echo "dot-secrets: $*" >&2; exit 1; }

main() {
  [ -d "$DOTFILES_PRIVATE" ] || die "private repo not found: $DOTFILES_PRIVATE"
  [ -f "$DOTFILES_PRIVATE/scripts/secret-helper.zsh" ] || die "missing: $DOTFILES_PRIVATE/scripts/secret-helper.zsh"
  exec zsh "$DOTFILES_PRIVATE/scripts/secret-helper.zsh" "$@"
}

main "$@"

